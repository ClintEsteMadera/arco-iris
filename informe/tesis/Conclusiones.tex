\section{Conclusiones}

	\subsection{Resumen del trabajo realizado}

		En resumidas palabras, el presente trabajo añade una serie de características a Rainbow, todas ellas tendientes a
		disponer de una herramienta genérica de auto reparación más poderosa y flexible y que, al mismo tiempo, los actores
		funcionales del sistema se vean involucrados en el proceso de definición de requerimientos de atributos de calidad,
		puesto que este tipo de actores son los encargados de determinar (junto a arquitectos, diseñadores, etc.) cómo se debe
		comportar el sistema ante determinadas situaciones de operación. Las características añadidas en este trabajo son
		básicamente las siguientes:
		\begin{itemize}
			\item Posibilidad de modelar escenarios de atributos de calidad siguiendo los principios de ATAM y QAW.
			\item Posibilidad de relacionar escenarios con componentes de la arquitectura.
			\item Posibilidad de especificar prioridades relativas entre escenarios, a ser utilizadas en la elección de la
			estrategia de reparación a ejecutar.
			\item Definición de entornos de ejecución para el sistema, con ponderaciones particulares para cada uno
			de los \emph{concerns} existentes, los cuales juegan un papel determinante en el algoritmo de elección de
			estrategias de reparación.
			\item Posibilidad de asociar estrategias de reparación a escenarios.
			\item Modelado de un nuevo algoritmo de elección de la mejor estrategia, utilizando todos los conceptos
			introducidos en Arco Iris.
			\item Implementación de cambios en diversos módulos de Rainbow (como por ejemplo, el \emph{RainbowModel} y el
			\emph{AdaptationManager} e implementación de algunos casos prácticos que permitan mostrar cómo esta estrategia
			puede funcionar y llevar a un \emph{framework} de adaptación más flexible y poderoso.
			\item Implementación de un mecanismo de recarga dinámica de la configuración de Arco Iris, la cuál en un futuro
			podría ser fácilmente integrada a Rainbow en pos de dinamizar el uso del \emph{framework}, minimizando su
			\emph{downtime} debido a cambios en la configuración.
			\item Implementación de una herramienta visual de escritorio que permita al usuario de Arco Iris, configurar el
			\emph{framework} de una manera sencilla, amena y eficiente.
		\end{itemize}

		Todo lo antedicho tiene como consecuencia que los usuarios tendrán más herramientas para influir sobre lo que el
		sistema decida hacer para auto repararse: sólo con modificar la información de los escenarios el sistema modificará su
		comportamiento. Como contrapartida, las extensiones propuestas en este trabajo hacen que el sistema se comporte de
		manera más autónoma a medida que se agregan escenarios; esto paradójicamente le quita control al usuario, ya que el
		procedimiento de auto reparación se vuelve más complejo, dificultando el seguimiento de las decisiones tomadas por el
		\emph{framework}.

	\subsection{Arco Iris comparado con Rainbow}

		\noindent En la presente sección repasaremos las ventajas que posee Arco Iris por sobre Rainbow. Profundizaremos en
		los siguientes puntos básicos:

		\noindent \todo{sacar grafico y poner tabla cuando imprimamos la versión definitiva (es para evitar falsos bad boxes)}
%  		\begin{center}
%  			\scriptsize{
%  			\rowcolors*[\hline]{1}{GreenYellow!25}{GreenYellow!10}
%  			\begin{tabularx}{\textwidth}{|X|X|X|X|}
%   			\textbf{Problema} & \textbf{Implementación en Rainbow} & \textbf{Implementación en \mbox{Arco Iris}} &
%   			\textbf{Ventajas}\\
%   			Rapidez en el cambio de configuración & La configuración se lee una vez al principio y no puede ser cambiada
%   			dinámicamente mientras Rainbow está funcionando. & Los escenarios se actualizan dinámicamente en \emph{runtime} al
%   			ser modificados. & Una gran parte de los cambios de configuración pasan a impactarse ins\-tan\-tá\-nea\-men\-te,
%   			evitando reiniciar el sistema para cambiar la configuración\\
%   			Información sobre restricciones & Guardadas en el modelo de la arquitectura (en \mbox{ACME}) & Mediante escenarios
%   			de QAW editados por \emph{stakeholders} & Fácil y transparente agregado y edición de las mismas.\\
%   			Decisiones sobre que reparaciones realizar & También se encuentran en archivos de configuración & Se evaluán los
%   			escenarios cargados y como se afectan entre ellos. Luego se invoca a un módulo que decide qué reparaciones pueden
%   			llevarse a cabo en ese contexto. & Posibilidad de extensión de dicho módulo para incluír complejas heurísticas que
%   			aprendan de los efectos de reparaciones pasadas, etc.\\
%   			Entorno de ejecución (e.g. Alta Carga)& Configurado estáticamente. Para modificarlo es necesario el reinicio del
%   			\emph{framework}. & Se permite especificar distintos entornos de ejecución. El sistema cambia
%   			di\-ná\-mi\-ca\-men\-te de en\-tor\-no sin necesidad de in\-ter\-ven\-ción humana ni reinicio del \emph{framework}.
%   			& Se agrega una nueva variable a considerar para la elección de una estrategia, aumentando la probabilidad de que
%   			la misma se adeque mejor a la situación actual del sistema.
%  			\end{tabularx}
%  			}
%  		\end{center}
			
		\begin{center}
			\includegraphics[width=1.00\textwidth]{images/ArcoIrisVsRainbow.png}
		\end{center}

		\subsubsection{Rapidez en el cambio de configuración}
			Como se ha mencionado anteriormente, Arco Iris (es decir, Rainbow con las extensiones realizadas en este trabajo)
			trabaja utilizando:
			\begin{itemize}
				\item por un lado, una configuración de \emph{Self Healing} en formato XML, producida ya sea por la herramientas
				Arco Iris UI o bien manualmente; la cual incluye: escenarios de QAW, entornos de ejecución y \emph{artifacts}.
				\item por otro, una batería de archivos de configuración heredados de Rainbow, en distintos formatos: stitch, ACME,
				\emph{properties files}, etc.
			\end{itemize}
			Una de las mejoras que agrega este trabajo a Rainbow es el de proveer un mecanismo dinámico de actualización de la
			configuración de \emph{Self Healing} mediante el cual cualquier modificación en el archivo XML de configuración
			cargada al iniciar Arco Iris, conlleva un ``refresco'' de la configuración que está siendo usada en tiempo de
			ejecución por el \emph{framework}, sin necesidad de intervención alguna de un operador.
			
			Este dinamismo agregado en lo que respecta a los cambios de configuración, trae aparejado una considerable serie de
			ventajas, a saber:
			\begin{itemize}
				\item ya no es necesario reiniciar el \emph{framework} de auto reparación para modificar cualquier característica
				relacionada con los escenarios, entornos de ejecución y \emph{artifacts} utilizados en el sistema. Esto evita
				tiempos de no-servicio, recursos involucrados en la reconfiguración y reinicio del sistema, etc. 
				\item se agrega flexibilidad al uso de la herramienta: se podrían agregar nuevos escenarios, nuevos entornos de
				ejecución que (re)definan situaciones de ejecución concretas, cambiar pesos de \emph{concerns} y/o prioridades relativas
				entre escenarios de acuerdo a necesidades puntuales del negocio e infinidad de otros cambios de configuración
				relevantes a la auto reparación quedarían impactados en el sistema automáticamente.
			\end{itemize}
			
		\subsubsection{Información sobre restricciones}
			Como se ha visto anteriormente, en Rainbow las restricciones impuestas sobre el funcionamiento del sistema (e.g.
			``el tiempo de respuesta para cualquier tipo de \emph{request} no debe superar los 5 mílisegundos'') son guardadas en
			el modelo de la arquitectura, el cual está expresado en el lenguaje de descripción de arquitecturas \mbox{ACME}.
			Esto claramente representa un impedimento para que los \emph{stakeholders} no técnicos puedan participar activamente
			en la definición de requerimientos de auto reparación del sistema; ya que de intentarlo, deberían poder comprender y
			modificar correctamente un diagrama de arquitectura, con sus restricciones escritas en un lenguaje no coloquial sino
			especialmente técnico.
			
			En Arco Iris, los \emph{stakeholders} usan una interfaz visual\ref{sec:arcoIrisUI} intuitiva y fácil de utilizar
			para expresar restricciones del sistema en formato de escenarios de QAW; los cuales a su vez fueron pensados
			originalmente para facilitar la participación de personas con roles funcionales.
			
			La información incorporada de esta manera, es analizada por Arco Iris para tomar decisiones en tiempo de ejecución
			sobre las auto reparaciones a realizar, considerando una variedad de aspectos, todos ellos configurados en un único
			lugar: los escenarios de QAW.
			
			Como vemos, Arco Iris provee una manera simplificada de agregar y/o editar restricciones sobre el sistema, sin
			necesidad de modificar su modelo de arquitectura, sino por medio de los escenarios de QAW. Esto representa una avance
			sobre como funciona Rainbow hoy día en ese aspecto.

		\subsubsection{Decisiones sobre que reparaciones realizar}

			Con respecto a este punto, la diferencia principal entre Rainbow y Arco Iris es el enfoque: al momento de
			decidir qué estrategia es la más adecuada para ser ejecutada en el contexto de una o más \emph{constraints} no
			cumpliendose, en Rainbow se calcula un \emph{score} para cada una de las estrategias existentes en el sistema,
			mientras Arco Iris busca aquellos escenarios de QAW ``rotos'' y sólo asigna un \emph{score} a las estrategias
			definidas en dicho subconjunto de escenarios. Este enfoque, además de ser más eficiente, es considerablemente mas
			sencillo de configurar y tiene más sentido a nivel funcional, ya que en el caso de Rainbow no parece haber una manera
			sencilla de intuír de antemano qué estrategia eligiría en cada caso, hecho que complica en análisis de las
			reparaciones efectuadas por Rainbow durante el transcurso de una ejecución.

		\subsubsection{Entorno de ejecución}

			En Rainbow, el concepto de entorno de ejecución es estáticamente configurado en un archivo de configuración y no se
			modifica de acuerdo al estado dinámico del sistema que se intenta reparar. Para modificar tal estático y limitado valor, es
			necesario el reinicio de Rainbow.
			
			El modelo de Arco Iris incluye el concepto de Entorno de Ejecución tal cual es descripto en la
			metodología ATAM\cite{ATAM}, el cual permite al usuario especificar distintos entornos de ejecución posibles para el
			sistema, los cuales poseen restricciones asociadas que se chequean continuamente y que, de cumplirse, hacen que se
			considere que el sistema se encuentra en otro entorno de ejecución, afectando así al algoritmo de decisión de
			estrategias de reparación; ya que dicha decisión está condicionada al \emph{scoring} de estrategias de reparación, el
			cual se realiza considerando los pesos relativos que poseen los \emph{concerns} arquitecturales en el entorno de ejecución
			actual.
			
			Lo antedicho, agrega una nueva arista a las variables consideradas al momento de elegir la mejor estrategia de
			reparación, aumentando las probabilidades de que la estrategia seleccionada sea más precisa de acuerdo a la situación
			del sistema en tiempo de ejecución.
			
			Si bien en Rainbow el concepto de ``entorno de ejecución'' no existe como tal, uno podría encontrarlo indirectamente
			dentro de ciertas condiciones de aplicabilidad embebidas dentro del código de las estrategias de reparación.
			
			Ahora bien, observemos que Rainbow no tiene forma de determinar a priori si alguna de las estrategias configuradas
			por el usuario van a aplicar en el contexto actual de ejecución: dada alguna \emph{constraint} violada, necesita
			inspeccionar la totalidad de las estrategias para verificar si son aplicables en la situación actual de
			\emph{runtime}. Esto último es una notable diferencia a favor de Arco Iris, ya que en este caso, al estar las
			estrategias de reparación candidatas embebidas en el escenario, aquellos escenarios cuyo entorno no se corresponda
			con el entorno actual de ejecución, no se considerarán ``rotos'', evitando cómputos innecesarios y refinando
			así el método original provisto por Rainbow.

	\subsection{Compatibilidad hacia atrás: una empresa sin sentido}

		Uno de los objetivos de diseño más deseables en una extensión a un \emph{framework} ya existente como Rainbow, es sin
		dudas que la extensión sea ``compatible hacia atrás'' con \emph{Rainbow}, entendiendose ésto como la capacidad de
		Arco Iris de agregar nuevas características manteniendo al 100\% la funcionalidad original. 
		
		En principio, si se considera únicamente el diseño de alto nivel de Rainbow, la idea de una extensión \emph{backwards
		compatible} parece factible. Pero, lamentablemente, si se consideran las diferencias conceptuales de ambos modelos,
		no es difícil notar que el intento de mantener a ambos conviviendo no sólo no es una tarea sencilla sino que también
		carece de sentido, ya que, en algunos puntos claves, son enfoques diametralmente opuestos. Veamos algunos de los
		motivos que apoyan esta idea:
		
		\begin{itemize}
			\item \textbf{Cómo se dispara la auto reparación:} El enfoque de Arco Iris hace centro en el concepto de Escenario
			como medio para expresar requerimientos de atributos de calidad para un sistema. Con lo cual, el inicio de todo el
			proceso de auto reparación se da de una manera sincrónica con respecto al Estímulo de algún escenario(s) ocurrido en
			el sistema en ejecución. Esto se contrapone con el enfoque de Rainbow, en el cual, periódicamente se verifican todas
			las restricciones e invariantes de la arquitectura. Observamos que si quisieramos mantener esta última
			característica de Rainbow, ya el foco absoluto de la auto reparación no estaría puesto en los Escenarios de
			atributos de calidad sino que paralelamente existirían dos flujos distintos de auto reparación disputando entre sí.
			Esto llevaría a un comportamiento excesivamente complejo y poco predecible, lo cual resulta poco deseable para un
			\emph{framework} de auto reparación.
			\item \textbf{Cómo se decide cuándo adaptar:} Arco Iris sólo intenta efectuar adaptaciones acotadas al escenario o
			los escenarios que se dejan de cumplir en un determinado momento, mientras que Rainbow contempla todo el abanico de
			estrategias disponibles en el caso de que detecte que una violación a una restricción o invariante ha tenido lugar.
			Evidentemente, los enfoques son distintos, sin mencionar que los algoritmos de \emph{scoring} de estrategias de
			ambos \emph{frameworks} difieren considerablemente, agregando el algoritmo de Arco Iris nuevas variables a la
			fórmula, tal como se explica en la sección \ref{sec:arcoIrisStrategyScoring}.
		\end{itemize}

	\subsection{Aplicabilidad en sistemas reales}

		Luego de haber repasado las características principales de Arco Iris y de haber entendido su mecánica, es muy probable
		que al lector se le suscite la siguiente pregunta: ¿Qué aplicabilidad tiene esta extensión de Rainbow en un	sistema real?
		
		Consideramos que Arco Iris se encuentra un paso más cerca de ser utilizado en un sistema de \emph{software} real (i.e.
		en un ámbito no académico) que lo que su antecesor, Rainbow, se encontraba. Esta consideración se basa en el hecho de
		que Arco Iris hace foco en la accesibilidad del usuario final para configurar el \emph{framework} de una manera amena
		y más flexible que la provista originalmente por Rainbow, incluyendo una interfaz de usuario visual que facilita dicha
		tarea así también como el mantenimiento y evolución de configuración existente.
		
		Habiendo dicho lo anterior, también reconocemos que Arco Iris todavía puede no ser la herramienta más sólida y madura
		que los sistemas de \emph{software} de la industria necesitan para confiar la compleja y crucial tarea de agregar auto
		reparación a un sistema. Esto tiene como causas diversos motivos, algunos de los más importantes son:
		
		\begin{itemize}
			\item Actualmente, no todas las organizaciones que desarrollan \emph{software} poseen un modelo formal de la
			arquitectura, tal como es requerido por Rainbow o Arco Iris. Esto forma parte de una tendencia por parte de La
			industria del \emph{software} a desarrollar sistemas, a veces de envergadura y de misión crítica, de una manera
			todavía artesanal. Esta realidad complica la adopción de \emph{frameworks} que centren la auto reparación de un
			sistema en el modelo de su arquitectura.
			\item El trabajo de creación de \emph{Gauges} y \emph{Probes} (los cuales usualmente no son reutilizables entre
			distintas aplicaciones) sigue siendo una tarea de complejidad no trivial a cargo del usuario del \emph{framework}.
			\item La información necesaria para que el \emph{framework} funcione, no obstante las mejoras introducidas en Arco
			Iris descritas en la sección \ref{sec:actualizacionDinamicaConfig}, sigue estando dispersa en diversos archivos de
			configuración, en archivos separados de estrategias y tácticas, en el modelo de la arquitectura, etc. Esto, sumado a
			una incompleta documentación de Rainbow, configura una curva de aprendizaje del \emph{framework} un tanto pronunciada
			para un usuario nuevo. Es necesario seguir trabajando en la centralización de la configuración (tal cual fue descrito
			en la sección \ref{sec:todaLaConfigEnUnSoloArchivo}) y también en el incremento de la documentación para facilitar el
			uso, tanto de Rainbow como de Arco Iris.
		\end{itemize}
